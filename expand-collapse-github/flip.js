/*!
 * Copyright 2016 Google Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
!function t(e,i,n){function s(a,o){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var i=e[a][1][t];return s(i?i:t)},h,h.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,t);var i={duration:330,delay:0,timing:function(t){return t},transform:!0,opacity:!0},s=Object.assign({},i,e);if("undefined"==typeof s.element)throw new Error("Element must be provided.");this.element_=s.element,this.first_={layout:null,opacity:0},this.last_={layout:null,opacity:0},this.invert_={x:0,y:0,sx:1,sy:1,a:0},this.start_=0,this.duration_=s.duration,this.delay_=s.delay,this.timingFunction_=s.timing,this.updateTransform_=s.transform,this.updateOpacity_=s.opacity,this.update_=this.update_.bind(this)}return s(t,null,[{key:"group",value:function(e){if(!Array.isArray(e))throw new Error("group() expects an array of objects.");return e=e.map(function(e){return new t(e)}),{flips_:e,addClass:function(t){e.forEach(function(e){return e.addClass(t)})},removeClass:function(t){e.forEach(function(e){return e.removeClass(t)})},first:function(){e.forEach(function(t){return t.first()})},last:function(t){e.forEach(function(e,i){var n=t;Array.isArray(t)&&(n=t[i]),"undefined"!=typeof n&&e.element_.classList.add(n)}),e.forEach(function(t){return t.last()})},invert:function(){e.forEach(function(t){return t.invert()})},play:function(t){"undefined"==typeof t&&(t=window.performance.now()),e.forEach(function(e){return e.play(t)})}}}},{key:"version",get:function(){return"0.1.5"}}]),s(t,[{key:"addClass",value:function(t){"string"==typeof t&&this.element_.classList.add(t)}},{key:"removeClass",value:function(t){"string"==typeof t&&this.element_.classList.remove(t)}},{key:"snapshot",value:function(t){this.first(),this.last(t),this.invert()}},{key:"first",value:function(){this.first_.layout=this.element_.getBoundingClientRect(),this.first_.opacity=parseFloat(window.getComputedStyle(this.element_).opacity)}},{key:"last",value:function(t){"undefined"!=typeof t&&this.addClass(t),this.last_.layout=this.element_.getBoundingClientRect(),this.last_.opacity=parseFloat(window.getComputedStyle(this.element_).opacity)}},{key:"invert",value:function(){var t=[];if(null===this.first_.layout)throw new Error("You must call first() before invert()");if(null===this.last_.layout)throw new Error("You must call last() before invert()");this.invert_.x=this.first_.layout.left-this.last_.layout.left,this.invert_.y=this.first_.layout.top-this.last_.layout.top,this.invert_.sx=this.first_.layout.width/this.last_.layout.width,this.invert_.sy=this.first_.layout.height/this.last_.layout.height,this.invert_.a=this.last_.opacity-this.first_.opacity,this.updateTransform_&&(this.element_.style.transformOrigin="0 0",this.element_.style.transform="translate("+this.invert_.x+"px, "+this.invert_.y+"px)\n           scale("+this.invert_.sx+", "+this.invert_.sy+")",t.push("transform")),this.updateOpacity_&&(this.element_.style.opacity=this.first_.opacity,t.push("opacity")),this.element_.style.willChange=t.join(",")}},{key:"play",value:function(t){if(null===this.invert_)throw new Error("invert() must be called before play()");"undefined"==typeof t?this.start_=window.performance.now()+this.delay_:this.start_=t+this.delay_,requestAnimationFrame(this.update_)}},{key:"update_",value:function(){var t=(window.performance.now()-this.start_)/this.duration_;t=this.clamp_(t,0,1);var e=this.timingFunction_(t),i={x:this.invert_.x*(1-e),y:this.invert_.y*(1-e),sx:this.invert_.sx+(1-this.invert_.sx)*e,sy:this.invert_.sy+(1-this.invert_.sy)*e,a:this.first_.opacity+this.invert_.a*e};this.updateTransform_&&(this.element_.style.transform="translate("+i.x+"px, "+i.y+"px)\n         scale("+i.sx+", "+i.sy+")"),this.updateOpacity_&&(this.element_.style.opacity=i.a),1>t?requestAnimationFrame(this.update_):(this.removeTransformsAndOpacity_(),this.resetFirstLastAndInvertValues_(),this.fire_("flipComplete"))}},{key:"fire_",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],s=new CustomEvent(t,{detail:e,bubbles:i,cancelable:n});this.element_.dispatchEvent(s)}},{key:"clamp_",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?Number.NEGATIVE_INFINITY:arguments[1],i=arguments.length<=2||void 0===arguments[2]?Number.POSITIVE_INFINITY:arguments[2];return Math.min(i,Math.max(e,t))}},{key:"removeTransformsAndOpacity_",value:function(){this.element_.style.transformOrigin=null,this.element_.style.transform=null,this.element_.style.opacity=null,this.element_.style.willChange=null}},{key:"resetFirstLastAndInvertValues_",value:function(){this.first_.layout=null,this.first_.opacity=0,this.last_.layout=null,this.last_.opacity=0,this.invert_.x=0,this.invert_.y=0,this.invert_.sx=1,this.invert_.sy=1,this.invert_.a=0}}]),t}();"undefined"==typeof window.FLIP?window.FLIP=r:console.warn("FLIP already exists")},{}]},{},[1]);
